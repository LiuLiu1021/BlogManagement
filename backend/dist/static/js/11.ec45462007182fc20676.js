webpackJsonp([11],{Usm9:function(t,e,a){"use strict";e.c=function(){return Object(n.a)({url:window._env_.WEB_API+"/blogSort/getList",method:"get"})},e.a=function(t){return Object(n.a)({url:window._env_.WEB_API+"/admin/blogSort/add",method:"post",data:t})},e.b=function(t){return Object(n.a)({url:window._env_.WEB_API+"/blogSort/deleteBatch",method:"post",data:t})};var n=a("vLgD")},lYdg:function(t,e){},vdJM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Usm9"),i=a("vLgD");function o(t){return Object(i.a)({url:window._env_.WEB_API+"/admin/workReport",method:"post",data:t})}var l={data:function(){return{expireTime:{disabledDate:function(t){return t.getTime()<=Date.now()}},expireEndTime:{disabledDate:function(t){return t.getTime()<=Date.now()}},add_visible:!1,activity_visible:!1,report_visible:!0,multipleSelection:[],tableData:[],keyword:"",currentPage:1,pageSize:10,total:0,title:"增加分类",dialogFormVisible:!1,formLabelWidth:"120px",isEditForm:!1,form:{sortName:"",description:"",startTime:"",endTime:"",credit:0},rules:{sortName:[{required:!0,message:"活动名称不能为空",trigger:"blur"},{min:1,max:10,message:"长度在1到10个字符"}]}}},created:function(){this.reportList()},methods:{reportList:function(){var t=this;Object(i.a)({url:window._env_.WEB_API+"/admin/getReportList",method:"get"}).then(function(e){t.tableData=e.data.records}).catch(function(e){console.log(e),t.tableData=[{uid:"1",blog_id:"1",title:"test",reason:"ghs",time:"2020-12-7",status:"0"},{uid:"1",blog_id:"1",title:"test",reason:"ghs",time:"2020-12-7",status:"0"}]})},sortList:function(){var t=this;Object(i.a)({url:window._env_.WEB_API+"/admin/getSortList",method:"get"}).then(function(e){t.tableData=e.data.records}).catch(function(e){console.log(e),t.tableData=[{uid:"1",sortName:"test",startTime:"2020-12-7",endTime:"2020-12-7",credit:10},{uid:"1",sortName:"test",startTime:"2020-12-7",endTime:"2020-12-7",credit:10}]})},changeReportState:function(){this.report_visible=!0,this.activity_visible=!1,this.add_visible=!1,this.reportList()},changeActivityState:function(){this.report_visible=!1,this.activity_visible=!0,this.add_visible=!0,this.sortList()},handleAdd:function(){this.dialogFormVisible=!0,this.form=this.getFormObject()},handlePass:function(t){var e=this;t.status=1,o(t).then(function(t){t.data.code==e.$ECode.SUCCESS&&(e.$message({type:"success",message:t.data.message}),window.location.reload())})},handleFail:function(t){var e=this;t.status=2,o(t).then(function(t){t.data.code==e.$ECode.SUCCESS&&(e.$message({type:"success",message:t.data.message}),window.location.reload())})},handleDelete:function(t){var e=this,a=this;this.$confirm("此操作将把分类删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[];i.push(t),Object(n.b)(i).then(function(t){t.data.code==e.$ECode.SUCCESS?e.$commonUtil.message.success(t.message):e.$commonUtil.message.error(t.message),a.blogSortList()})}).catch(function(){e.$commonUtil.message.info("已取消删除")})},getFormObject:function(){return{sortName:"",description:"",startTime:"",endTime:"",credit:0}},handleDeleteBatch:function(){var t=this,e=this;e.multipleSelection.length<=0?this.$commonUtil.message.error("请先选中需要删除的内容!"):this.$confirm("此操作将把选中的分类删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.b)(e.multipleSelection).then(function(a){a.data.code==t.$ECode.SUCCESS?t.$commonUtil.message.success(a.message):t.$commonUtil.message.error(a.message),e.blogSortList()})}).catch(function(){t.$commonUtil.message.info("已取消删除！")})},handleCurrentChange:function(t){this.currentPage=t,this.blogSortList()},submitForm:function(){var t=this;this.$refs.form.validate(function(e){e?(console.log(t.form),Object(n.a)(t.form).then(function(e){e.data.code==t.$ECode.SUCCESS?(t.$commonUtil.message.success(e.message),t.dialogFormVisible=!1,t.sortList()):t.$commonUtil.message.error(e.message)})):console.log("校验失败")})},handleSelectionChange:function(t){this.multipleSelection=t}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{margin:"65px 0 10px 0"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.changeReportState}},[t._v("举报信息管理")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-star-on"},on:{click:t.changeActivityState}},[t._v("活动信息管理\n    ")]),t._v(" "),t.add_visible?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleAdd}},[t._v("添加活动\n    ")]):t._e()],1),t._v(" "),t.report_visible?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"举报用户用户名",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uid))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"被举报博客名称",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"举报理由",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.reason))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"举报时间",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"举报状态",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?[a("span",[t._v("未审核")])]:t._e(),t._v(" "),1==e.row.status?[a("span",[t._v("举报成功")])]:t._e(),t._v(" "),2==e.row.status?[a("span",[t._v("举报失败")])]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handlePass(e.row)}}},[t._v("审核成功\n        ")]),t._v(" "),a("el-button",{attrs:{type:"error",size:"small"},on:{click:function(a){t.handleFail(e.row)}}},[t._v("审核失败\n        ")])]}}])})],1):t._e(),t._v(" "),t.activity_visible?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"管理员用户名",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uid))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动名称",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sortName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"起始时间",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.startTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"终止时间",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.endTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"奖励个人积分",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.credit))])]}}])})],1):t._e(),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"活动名",prop:"sortName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.sortName,callback:function(e){t.$set(t.form,"sortName",e)},expression:"form.sortName"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"活动介绍",prop:"content"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"起始时间",prop:"sort"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.expireTime,placeholder:"选择日期"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"终止时间",prop:"sort"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.expireEndTime,placeholder:"选择日期"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"奖励个人积分",prop:"sort"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.credit,callback:function(e){t.$set(t.form,"credit",e)},expression:"form.credit"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(t){a("lYdg")},null,null);e.default=r.exports}});
//# sourceMappingURL=11.ec45462007182fc20676.js.map